# NexaOS å¿«é€Ÿå¼€å§‹æŒ‡å—

> **æ›´æ–°æ—¶é—´**: 2025-11-25  
> **å¹³å°**: x86_64  
> **ç±»å‹**: æ··åˆå†…æ ¸æ“ä½œç³»ç»Ÿ

---

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
2. [5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ](#5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ)
3. [è¯¦ç»†æ„å»ºæ­¥éª¤](#è¯¦ç»†æ„å»ºæ­¥éª¤)
4. [è¿è¡Œå’Œæµ‹è¯•](#è¿è¡Œå’Œæµ‹è¯•)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+), macOS, Windows (WSL2)
- **CPU**: x86_64 å¤„ç†å™¨
- **å†…å­˜**: â‰¥4GB (å»ºè®®8GB+)
- **ç£ç›˜**: â‰¥20GB å¯ç”¨ç©ºé—´
- **è™šæ‹ŸåŒ–**: QEMU æˆ–å…¶ä»– x86_64 è™šæ‹Ÿæœº

### è½¯ä»¶è¦æ±‚

```bash
# Rust (æœ€æ–° nightly)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
rustup default nightly
rustup component add rust-src

# æ„å»ºå·¥å…·
Ubuntu/Debian:
  sudo apt-get install -y build-essential grub2-common grub-pc-bin \
    xorriso qemu-system-x86 git

macOS:
  brew install grub xorriso qemu

# éªŒè¯å®‰è£…
rustc --version          # åº”è¯¥æ˜¯ nightly
cargo --version
grub-mkrescue --version
qemu-system-x86_64 --version
```

---

## 5åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

### ç¬¬1æ­¥ï¼šè·å–ä»£ç 

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/nexa-sys/nexa-os.git
cd nexa-os

# éªŒè¯ç›®å½•ç»“æ„
ls -la scripts/    # æ„å»ºè„šæœ¬
ls -la src/        # å†…æ ¸æºä»£ç 
ls -la userspace/  # ç”¨æˆ·ç©ºé—´ç¨‹åº
```

### ç¬¬2æ­¥ï¼šå®Œæ•´æ„å»ºï¼ˆ3-5åˆ†é’Ÿï¼‰

```bash
# ä¸€æ¬¡æ€§æ„å»ºæ‰€æœ‰ç»„ä»¶
./scripts/build-all.sh

# è¾“å‡ºæ–‡ä»¶ï¼š
# âœ“ target/x86_64-nexaos/release/nexa-os (å†…æ ¸, ~2MB)
# âœ“ build/initramfs.cpio (å¼•å¯¼ç¯å¢ƒ, ~380KB)
# âœ“ build/rootfs.ext2 (æ ¹æ–‡ä»¶ç³»ç»Ÿ, 50MB)
# âœ“ dist/nexaos.iso (å¯å¯åŠ¨é•œåƒ, ~65MB)
```

### ç¬¬3æ­¥ï¼šåœ¨QEMUä¸­è¿è¡Œï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# å¯åŠ¨ QEMUï¼ˆè‡ªåŠ¨ç›‘æ§ä¸²å£è¾“å‡ºï¼‰
./scripts/run-qemu.sh

# ç­‰å¾…ç³»ç»Ÿå¯åŠ¨...
# çœ‹åˆ° "Welcome to NexaOS Shell" æ—¶æŒ‰ Enter

# å°è¯•è¿™äº›å‘½ä»¤ï¼š
$ help              # æŸ¥çœ‹å¯ç”¨å‘½ä»¤
$ ls -la            # åˆ—å‡ºæ–‡ä»¶
$ echo "Hello"      # æ‰“å°æ–‡æœ¬
$ ps                # æ˜¾ç¤ºè¿›ç¨‹
$ whoami            # æŸ¥çœ‹å½“å‰ç”¨æˆ·

# é€€å‡ºï¼šCtrl-A Xï¼ˆæˆ–Ctrl-Cï¼‰
```

### ç¬¬4æ­¥ï¼šéªŒè¯ç³»ç»Ÿ

```bash
# æ£€æŸ¥è¿›ç¨‹
$ ps                # åº”è¯¥æ˜¾ç¤º ni (init), getty, shell

# æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ
$ ls /bin           # æŸ¥çœ‹å¯ç”¨å‘½ä»¤
$ ls /etc           # æŸ¥çœ‹é…ç½®æ–‡ä»¶

# è¿è¡Œç½‘ç»œæµ‹è¯•ï¼ˆå¦‚æœæ”¯æŒï¼‰
$ nslookup google.com
$ ping 8.8.8.8
```

---

## è¯¦ç»†æ„å»ºæ­¥éª¤

### æ­¥éª¤1ï¼šè®¾ç½®ç¯å¢ƒ

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt-get update && sudo apt-get upgrade -y

# å®‰è£…å¿…éœ€çš„åŒ…
sudo apt-get install -y \
  build-essential \
  grub2-common \
  grub-pc-bin \
  xorriso \
  qemu-system-x86_64 \
  git \
  curl

# å®‰è£… Rustï¼ˆnightlyï¼‰
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env
rustup default nightly
rustup component add rust-src
```

### æ­¥éª¤2ï¼šå…‹éš†å’Œæ£€æŸ¥

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/nexa-sys/nexa-os.git
cd nexa-os

# æ£€æŸ¥é¡¹ç›®ç»“æ„
tree -L 2 -I 'target|build|dist'
```

### æ­¥éª¤3ï¼šæ„å»ºå†…æ ¸

```bash
# æ„å»ºå†…æ ¸ï¼ˆåªéœ€è¦ä¸€æ¬¡æˆ–ä¿®æ”¹å†…æ ¸ä»£ç åï¼‰
cargo build --release --target x86_64-nexaos.json

# è¾“å‡ºï¼štarget/x86_64-nexaos/release/nexa-os
# å¤§å°ï¼š~2-50MBï¼ˆå–å†³äºè°ƒè¯•ä¿¡æ¯ï¼‰
# æ—¶é—´ï¼š1-3 åˆ†é’Ÿï¼ˆé¦–æ¬¡ï¼‰, 10-30 ç§’ï¼ˆå¢é‡ï¼‰

# éªŒè¯ Multiboot2 å…¼å®¹æ€§
grub-file --is-x86-multiboot2 target/x86_64-nexaos/release/nexa-os
```

### æ­¥éª¤4ï¼šæ„å»ºç”¨æˆ·ç©ºé—´

```bash
# ç¼–è¯‘ç”¨æˆ·ç©ºé—´ç¨‹åºï¼ˆshell, init, gettyç­‰ï¼‰
./scripts/build-userspace.sh

# è¾“å‡ºï¼šbuild/userspace-build/target/x86_64-nexaos-userspace/release/
# ç¨‹åºåŒ…æ‹¬ï¼šni, getty, shell, login ç­‰
# æ—¶é—´ï¼š30-60 ç§’
```

### æ­¥éª¤5ï¼šæ„å»ºæ ¹æ–‡ä»¶ç³»ç»Ÿ

```bash
# åˆ›å»º ext2 ç£ç›˜é•œåƒå¹¶å¤åˆ¶æ‰€æœ‰ç³»ç»Ÿæ–‡ä»¶
./scripts/build-rootfs.sh

# è¾“å‡ºï¼šbuild/rootfs.ext2 (50MB)
# åŒ…å«æ‰€æœ‰ç³»ç»Ÿæ–‡ä»¶ã€é…ç½®ã€åº“
# æ—¶é—´ï¼š1-2 åˆ†é’Ÿ

# éªŒè¯æ–‡ä»¶ç³»ç»Ÿ
ls -la build/rootfs/        # æŸ¥çœ‹å†…å®¹
file build/rootfs.ext2      # éªŒè¯ç±»å‹
```

### æ­¥éª¤6ï¼šåˆ›å»ºå¯å¯åŠ¨ ISO

```bash
# æ‰“åŒ…ä¸ºå¯å¯åŠ¨ ISO é•œåƒ
./scripts/build-iso.sh

# è¾“å‡ºï¼šdist/nexaos.iso (~65MB)
# åŒ…å«ï¼šGRUB, å†…æ ¸, initramfs, rootfs
# æ—¶é—´ï¼š30 ç§’

# éªŒè¯ ISO
ls -lh dist/nexaos.iso
file dist/nexaos.iso
```

### å…¨éƒ¨ä¸€æ¬¡æ€§æ„å»º

```bash
# å¿«æ·æ–¹å¼ï¼šä¸€æ¬¡æ„å»ºæ‰€æœ‰ç»„ä»¶
./scripts/build-all.sh

# ç­‰ä»·äºè¿è¡Œï¼š
# 1. cargo build --release ...
# 2. ./scripts/build-userspace.sh
# 3. ./scripts/build-rootfs.sh
# 4. ./scripts/build-iso.sh
```

---

## è¿è¡Œå’Œæµ‹è¯•

### åœ¨QEMUä¸­è¿è¡Œ

```bash
# æ ‡å‡†æ–¹æ³•ï¼ˆæ¨èï¼‰
./scripts/run-qemu.sh

# å‚æ•°ï¼š
#   -gdb        å¯ç”¨ GDB è°ƒè¯•æ”¯æŒ
#   -s          å•æ­¥æ‰§è¡Œ
#   å…¶ä»–        ä¼ é€’ç»™ QEMU çš„å‚æ•°

# ç›‘æ§ä¸²å£è¾“å‡ºï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
tail -f /tmp/qemu-serial.log
```

### QEMU å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|-------|------|
| Ctrl-A D | é€€å‡ºåˆ° QEMU ç›‘è§†å™¨ |
| Ctrl-A X | é€€å‡º QEMU |
| Ctrl-A C | è¿›å…¥ QEMU ç›‘è§†å™¨æ§åˆ¶å° |
| Ctrl-C  | ä¸­æ–­ï¼ˆå¦‚æœåœ¨ç›‘è§†å™¨ä¸­ï¼‰ |

### æµ‹è¯•åŸºæœ¬åŠŸèƒ½

```bash
# å¯åŠ¨ç³»ç»Ÿ
./scripts/run-qemu.sh

# åœ¨ Shell ä¸­æµ‹è¯•
$ help                    # æ˜¾ç¤ºå¯ç”¨å‘½ä»¤
$ ls -la                  # åˆ—å‡ºæ–‡ä»¶
$ pwd                     # å½“å‰ç›®å½•
$ echo "Test"            # æ‰“å°æ–‡æœ¬
$ ps                      # æ˜¾ç¤ºè¿›ç¨‹
$ whoami                  # å½“å‰ç”¨æˆ·
$ stat /bin/shell        # æ–‡ä»¶ä¿¡æ¯
$ mkdir /tmp/test        # åˆ›å»ºç›®å½•
$ touch /tmp/test/file   # åˆ›å»ºæ–‡ä»¶
$ cat /etc/inittab       # æŸ¥çœ‹é…ç½®
```

### è°ƒè¯•æ¨¡å¼æ„å»º

```bash
# å¯ç”¨è°ƒè¯•ç¬¦å·å’Œè¯¦ç»†æ—¥å¿—
./scripts/build-rootfs-debug.sh

# æŸ¥çœ‹æ›´è¯¦ç»†çš„å¯åŠ¨æ—¥å¿—
tail -f /tmp/qemu-serial.log
```

---

## å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šbuild-all.sh å¤±è´¥

**ç—‡çŠ¶**: è„šæœ¬åœ¨æŸä¸€æ­¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†ä¹‹å‰çš„æ„å»º
cargo clean
rm -rf build/ dist/

# é€æ­¥æ„å»ºï¼ˆæ‰¾å‡ºå¤±è´¥ç‚¹ï¼‰
cargo build --release --target x86_64-nexaos.json
./scripts/build-userspace.sh
./scripts/build-rootfs.sh
./scripts/build-iso.sh
```

### é—®é¢˜2ï¼š"command not found: grub-mkrescue"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# Linux
sudo apt-get install grub2-common grub-pc-bin xorriso

# macOS
brew install grub xorriso

# éªŒè¯
grub-mkrescue --version
```

### é—®é¢˜3ï¼šQEMU æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: å¯åŠ¨è„šæœ¬å‡ºé”™æˆ–ç³»ç»Ÿä¸å¯åŠ¨

**è°ƒè¯•**:
```bash
# éªŒè¯ ISO æœ‰æ•ˆæ€§
file dist/nexaos.iso

# éªŒè¯ Multiboot2 å…¼å®¹æ€§
grub-file --is-x86-multiboot2 target/x86_64-nexaos/release/nexa-os

# é‡æ–°æ„å»º
./scripts/build-all.sh

# è¿è¡Œå¹¶ç›‘æ§
./scripts/run-qemu.sh &
tail -f /tmp/qemu-serial.log
```

### é—®é¢˜4ï¼šç³»ç»Ÿå¯åŠ¨ä½†æŒ‚èµ·

**ç—‡çŠ¶**: çœ‹ä¸åˆ° Shell æç¤ºç¬¦

**æ­¥éª¤**:
1. å¯ç”¨è°ƒè¯•: `loglevel=debug` å‚æ•°
2. ç›‘æ§æ—¥å¿—: `tail -f /tmp/qemu-serial.log`
3. æŸ¥æ‰¾æœ€åçš„é”™è¯¯æˆ–ç³»ç»Ÿè°ƒç”¨
4. ä½¿ç”¨è°ƒè¯•æ„å»º: `./scripts/build-rootfs-debug.sh`

### é—®é¢˜5ï¼šç£ç›˜ç©ºé—´ä¸è¶³

**ç—‡çŠ¶**: æ„å»ºæ—¶"æ²¡æœ‰ç©ºé—´"é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†æ—§æ„å»º
cargo clean

# æ£€æŸ¥ç£ç›˜
df -h

# ç§»é™¤æ„å»ºç›®å½•
rm -rf build/ dist/ target/

# å¦‚éœ€è¦ï¼Œå¢åŠ è™šæ‹Ÿç£ç›˜ï¼ˆDocker/è™šæ‹Ÿæœºï¼‰
```

### é—®é¢˜6ï¼šç½‘ç»œåŠŸèƒ½ä¸å·¥ä½œ

**ç—‡çŠ¶**: `nslookup` æˆ– `ping` å¤±è´¥

**æ£€æŸ¥**:
```bash
# åœ¨ QEMU ä¸­æ£€æŸ¥ç½‘ç»œ
$ ifconfig        # åº”è¯¥æ˜¾ç¤º eth0 æˆ–ç±»ä¼¼è®¾å¤‡
$ nslookup google.com

# åœ¨ä¸»æœºä¸­è¿è¡Œ QEMU ä¸”å¯ç”¨ç½‘ç»œ
./scripts/run-qemu.sh -net nic -net user
```

---

## ä¸‹ä¸€æ­¥

### å¼€å‘å†…æ ¸åŠŸèƒ½

1. æŸ¥çœ‹ [è‹±æ–‡æ¶æ„æ–‡æ¡£](../en/ARCHITECTURE.md)
2. ä¿®æ”¹ `src/` ä¸‹çš„æºä»£ç 
3. é‡æ–°æ„å»º: `cargo build --release --target x86_64-nexaos.json`
4. æµ‹è¯•: `./scripts/run-qemu.sh`

### å¼€å‘ç”¨æˆ·ç©ºé—´ç¨‹åº

1. åœ¨ `userspace/` åˆ›å»ºæ–°æ–‡ä»¶
2. ä¿®æ”¹æ„å»ºè„šæœ¬ä»¥åŒ…å«æ–°ç¨‹åº
3. è¿è¡Œ: `./scripts/build-rootfs.sh`
4. åœ¨ç³»ç»Ÿä¸­æµ‹è¯•

### äº†è§£ç³»ç»Ÿæ¶æ„

- **å¿«é€Ÿå‚è€ƒ**: [../en/QUICK-REFERENCE.md](../en/QUICK-REFERENCE.md)
- **å®Œæ•´æ¶æ„**: [æ¶æ„è®¾è®¡.md](æ¶æ„è®¾è®¡.md)
- **ç³»ç»Ÿè°ƒç”¨**: [../en/SYSCALL-REFERENCE.md](../en/SYSCALL-REFERENCE.md)

### æŸ¥çœ‹å®Œæ•´æ–‡æ¡£

- **æ–‡æ¡£ä¸­å¿ƒ**: [README.md](README.md)
- **è‹±æ–‡æ–‡æ¡£**: [../en/README.md](../en/README.md)
- **æ•…éšœæ’é™¤**: [æ•…éšœæ’é™¤/](æ•…éšœæ’é™¤/)

---

## è·å–å¸®åŠ©

- **GitHub Issues**: https://github.com/nexa-sys/nexa-os/issues
- **è®¨è®º**: https://github.com/nexa-sys/nexa-os/discussions
- **æ–‡æ¡£**: æŸ¥çœ‹ `docs/` ç›®å½•

---

**æœ€åæ›´æ–°**: 2025-11-25  
**ç»´æŠ¤è€…**: NexaOS å¼€å‘å›¢é˜Ÿ  
**çŠ¶æ€**: âœ… å®Œæ•´ä¸”æœ€æ–°

